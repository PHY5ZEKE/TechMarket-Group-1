@model List<TechMarket.Models.ToShipProduct>
<style>
    body {
        margin-left: 220px;
        background-color: #f8f9fa;
        color: #343a40;
    }

</style>
<!-- Add these links in the head section of your HTML file -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
<link rel="stylesheet" href="~/css/table.css" asp-append-version="true" />
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

<br />
<br />
<br />
<br />
<br />
<br />

<h2>Products to Ship</h2>

@if (Model.Any())
{
    <table class="table">
        <thead>
            <tr>
                <th>Product Name</th>
                <th>Image</th>
                <th>Description</th>
                <th>Price</th>
                <th>Purchase Date</th>
                <th>Buyer</th>
                <th>Address to Ship</th>
                <th>Buyer Email</th>
                <th>Buyer Contact</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var productToShip in Model)
            {
                <tr>
                    <td>@productToShip.ProductName</td>
                    <td>
                        @* Display the product image, adjust the path accordingly *@
                        <img src="~/@productToShip.ProductImageURL" alt="Product Image" style="max-width: 100px; max-height: 100px;" />
                    </td>
                    <td>@productToShip.ProductDescription</td>
                    <td>@productToShip.ProductPrice</td>
                    <td>@productToShip.PurchaseDate.ToString("yyyy-MM-dd HH:mm:ss")</td>
                    <td>@productToShip.BuyerName</td>
                    <td>@productToShip.BuyerAddress</td>
                    <td>@productToShip.BuyerEmail</td>
                    <td>@productToShip.BuyerContact</td>
                    <td>
                        @* Assuming you want to show the details for each product to ship *@
                        <a href="@Url.Action("ShowDetailsToShip", "Product", new { id = productToShip.ProductId })" class="btn btn-primary">Show Details</a> <br><br>
                        <a class="btn btn-warning confirm-ship-btn"
                           data-product-id="@productToShip.ToShipProductId"
                           data-toggle="modal"
                           data-target="#confirmShipModal">
                            Confirm Product Shipped
                        </a>

                    </td>

                </tr>
            }
        </tbody>
    </table>

    <div class="modal fade" id="confirmShipModal" tabindex="-1" role="dialog" aria-labelledby="confirmShipModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmShipModalLabel">Confirm Shipment</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure that the product has been shipped?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <a href="#" id="confirmShipBtn" class="btn btn-warning">Yes, Confirm Shipment</a>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript to handle confirmation -->
    <script>
        $(document).ready(function () {
            $(".confirm-ship-btn").click(function () {
                var productId = $(this).data("product-id");
                $("#confirmShipBtn").attr("href", "/Product/TransferToReceive?toShipProductId=" + productId);
            });
        });
    </script>
}
else
{
    <p>No products to ship.</p>
}



